<table mat-table [dataSource]="userAddresses" class="mat-elevation-z8">
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef style="width: 100px"> Id</th>
    <td mat-cell *matCellDef="let address"> {{address.id}} </td>
  </ng-container>

  <ng-container matColumnDef="country">
    <th mat-header-cell *matHeaderCellDef style="width: 100px"> Country</th>
    <td mat-cell *matCellDef="let address"> {{address.country}} </td>
  </ng-container>

  <ng-container matColumnDef="street">
    <th mat-header-cell *matHeaderCellDef style="width: 100px"> Street</th>
    <td mat-cell *matCellDef="let address"> {{address.country}} </td>
  </ng-container>

  <ng-container matColumnDef="city">
    <th mat-header-cell *matHeaderCellDef style="width: 100px"> City</th>
    <td mat-cell *matCellDef="let address"> {{address.city}} </td>
  </ng-container>

  <ng-container matColumnDef="zipCode">
    <th mat-header-cell *matHeaderCellDef style="width: 100px"> Zip code</th>
    <td mat-cell *matCellDef="let address"> {{address.zipCode}} </td>
  </ng-container>

  <ng-container matColumnDef="isActive">
    <th mat-header-cell *matHeaderCellDef style="width: 100px"> Is active</th>
    <td mat-cell *matCellDef="let address"> {{address.active}} </td>
  </ng-container>

  <ng-container matColumnDef="edit">
    <th mat-header-cell *matHeaderCellDef style="width: 100px"> Edit</th>
    <td mat-cell *matCellDef="let address">
      <a routerLink="/address-edit/{{address.id}}/{{requestId}}" routerLinkActive="active">
        <button mat-button color="primary">Edit</button>
      </a>
    </td>
  </ng-container>

  <ng-container matColumnDef="deactivate">
    <th mat-header-cell *matHeaderCellDef style="width: 125px;"> Change status</th>
    <td mat-cell *matCellDef="let address">
      <div *ngIf="!address.defaultAddress">
        <button *ngIf="address.active; else elseButton" (click)="deactivateAddress(address.id)" mat-button color="primary">
          Deactivate
        </button>
        <ng-template #elseButton>
          <button (click)="activateAddress(address.id)" mat-button color="primary">
            Activate
          </button>
        </ng-template>
      </div>
    </td>

    <ng-container matColumnDef="makeDefault">
      <th mat-header-cell *matHeaderCellDef style="width: 100px"> Default</th>
      <td mat-cell *matCellDef="let address">
        <div *ngIf="address.defaultAddress || !address.active; else elseButton">
          <div *ngIf="address.defaultAddress"> Default address
          </div>
        </div>
        <ng-template #elseButton>
          <button (click)="setDefault(address.id)" mat-button color="primary">
            Set default
          </button>
        </ng-template>
      </td>
    </ng-container>

  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayColumns;"></tr>
</table>

<h3>Add new address</h3>
<form [formGroup]="newAddressForm" (ngSubmit)="onAddressSubmit()">
  <mat-form-field appearance="fill">
    <mat-label>Country:</mat-label>
    <input matInput formControlName="country">
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>City:</mat-label>
    <input matInput formControlName="city">
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Street:</mat-label>
    <input matInput formControlName="street">
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Zip code:</mat-label>
    <input matInput formControlName="zipCode">
  </mat-form-field>

  <button type="submit" [disabled]="!newAddressForm.valid" mat-button color="primary">Submit</button>
</form>


